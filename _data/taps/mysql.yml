name: MySQL / MariaDB
type: tap
source:
  type: database
  name: MySQL or MariaDB database
  url: https://www.mysql.com/
description: MySQL / MariaDB database extractor
singer_name: tap-mysql
variants:
- name: transferwise
  default: true
  maintainer:
    name: Wise
    link: https://wise.com/
  maintenance_status: Active
  repo: https://github.com/transferwise/pipelinewise-tap-mysql
  pip_url: pipelinewise-tap-mysql
  capabilities:
    - catalog
    - discover
    - state
  settings_group_validation:
    - ['host', 'port', 'user', 'password']
  settings:
    - name: host
      value: localhost
    - name: port
      kind: integer
      value: 3306
    - name: user
    - name: password
      kind: password
    - name: database
    - name: ssl
      kind: boolean
      value: false
      value_post_processor: stringify # TODO: This is Meltano specific, but this tap actually wants "true" or "false" with quotes

    - name: filter_dbs
      description: Comma separated list of schemas to extract tables only from particular schemas and to improve data extraction performance
    - name: export_batch_rows
      value: 50000
      description: Number of rows to export from MySQL in one batch.
    - name: session_sqls
      kind: array
      value:
        - SET @@session.time_zone="+0:00"
        - SET @@session.wait_timeout=28800
        - SET @@session.net_read_timeout=3600
        - SET @@session.innodb_lock_wait_timeout=3600
      description: List of SQL commands to run when a connection made. This allows to set session variables dynamically, like timeouts.
