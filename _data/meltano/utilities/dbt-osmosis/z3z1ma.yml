name: dbt-osmosis
label: dbt-osmosis
namespace: dbt_osmosis
pip_url: dbt-osmosis
maintenance_status: active
repo: https://github.com/z3z1ma/dbt-osmosis
executable: dbt-osmosis
logo_url: /assets/logos/utilities/dbt-osmosis.png
variant: z3z1ma
commands:
  server:
    args: server --project-dir ${MELTANO_PROJECT_ROOT}/transform --profiles-dir
      ${MELTANO_PROJECT_ROOT}/transform/profiles/${ADAPTER}
    description: |
      Start a server exposing two primary endpoints. /compile and /run which receive POST
      requests and compile or run dbt SQL against your dbt profile. It is significantly faster 
      and simpler than dbt RPC and internally does not rely on it. This server is compatible with 
      https://github.com/datacoves/vscode-dbt-power-user providing VS code users interactive
      query previews via a simple ▶️ button.
  workbench:
    args:
      workbench --project-dir ${MELTANO_PROJECT_ROOT}/transform --profiles-dir
      ${MELTANO_PROJECT_ROOT}/transform/profiles/${ADAPTER}
    description: |
      Start an interactive dbt workbench. Copy and paste model code into the workbench
      or author a model from scratch. The workbench allows you to write dbt with instant
      compile-as-you-type functionality. Spin it up or tear it down as needed.
  diff:
    args: diff --project-dir ${MELTANO_PROJECT_ROOT}/transform --profiles-dir
      ${MELTANO_PROJECT_ROOT}/transform/profiles/${ADAPTER}
    description: Diff a dbt model from git HEAD to inspect changes as you develop, requires -m [MODEL]
  diff-cache:
    args: diff --project-dir ${MELTANO_PROJECT_ROOT}/transform --profiles-dir
      ${MELTANO_PROJECT_ROOT}/transform/profiles/${ADAPTER} --temp-table
    description: |
      Diff a query from git HEAD to inspect changes as you develop caching the HEAD rev of the model 
      to a schema called `dbt_diff`, requires -m [MODEL]
  run:
    args: run --project-dir ${MELTANO_PROJECT_ROOT}/transform --profiles-dir
      ${MELTANO_PROJECT_ROOT}/transform/profiles/${ADAPTER}
    description: Organizes all dbt schema yaml files and cascadingly inherits
      documentation to keep it DRY.
  compose:
    args: compose --project-dir ${MELTANO_PROJECT_ROOT}/transform --profiles-dir
      ${MELTANO_PROJECT_ROOT}/transform/profiles/${ADAPTER}
    description: A slimmer version of `run` used in precommit hooks
settings:
  - name: adapter
    env: ADAPTER
    description: |
      This should be set to the adapter you have installed as meltano will install
      dbt and its profile directory into transform/<adapter> directory. We use this 
      config option to resolve dbt profile directory.
keywords:
  - dbt
  - osmosis
  - tools
  - tooling
definition: Centrally track all your metadata assets pushing metadata to datahub.
next_steps: |
  1. Add dbt-<adapter> to your pip_url, ie: `pip_url: dbt-osmosis dbt-bigquery`

  2. Override the namespace to mirror your dbt adapter, ie: `namespace: dbt_bigquery`

  3. Mirror the configuration set in your dbt-<adapter> plugin. A simple copy-paste of
  the `config:` block should be sufficient.
