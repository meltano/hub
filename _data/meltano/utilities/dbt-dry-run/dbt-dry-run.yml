commands:
  run:
    args:
      args:
        --target ${DBT_DRY_RUN_TARGET}
        --verbose
      definition: |
        Allows you to run the plugin. Requires that you specify a profile target.
        Note - Requires you run `dbt-bigquery compile` before executing.
      executable: dbt_dry_run_invoker

definition: |
  dbt-dry-run is a meltano plugin based on the awesome tool created by the team at AutoTraderUk.
  It allows dbt-bigquery users to validate if their models will run (without encuring costs).
  It leverages bigquery's [dry-run](https://cloud.google.com/bigquery/docs/dry-run-queries) feature.

  **A note**
  This plugin is at it's most powerful (in our opinion) in CI (we use github actions). It allows us to ensure that our changes will not break production.
domain_url: https://github.com/autotraderuk/dbt-dry-run
entity_url: https://cloud.google.com/bigquery/docs/dry-run-queries
meltano_edk: true
executable: dbt-dry-run
keywords:
- dbt
- bigquery
- testing
- continuous-integrations
label: dbt-dry-run
logo_url: /assets/logos/utilities/dbt-dry-run.png
maintenance_status: active
name: dbt-dry-dryn
namespace: dbt-dry-run
next_steps: |
  To run this plugin for the first time, simply specify you DBT_BIGQUERY_PROFILES_DIR, DBT_BIGQUERY_PROJECT_DIR and DBT_DRY_RUN_TARGET.
  You will also need to compile your dbt models using the command `dbt-bigquery compile`.

  Once this is done, simply run `dbt-dry-run:run` and watch the magic happen!
repo: git+https://github.com/potloc/dbt-dry-run-ext
settings:
  - name: project-dir
    kind: string
    value: ${MELTANO_PROJECT_ROOT}/transform/
    env: DBT_PROJECT_DIR
    description: Location of the directory hosting your `dbt_project.yml` file.
  - name: profiles-dir
    kind: string
    value: ${MELTANO_PROJECT_ROOT}/transform/profiles/bigquery/
    env: DBT_PROFILES_DIR
    description: Location of the directory hosting your `profiles.yml` file.
  - name: target
    kind: string
    description: Target profile in DBT.
variant: potloc
