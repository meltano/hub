capabilities:
- properties
- discover
- state
description: Advertising Platform
domain_url: https://developers.facebook.com/docs/marketing-apis
keywords:
- api
label: Facebook Ads
logo_url: /assets/logos/extractors/facebook.png
maintenance_status: active
name: tap-facebook
namespace: tap_facebook
pip_url: git+https://github.com/singer-io/tap-facebook.git
repo: https://github.com/singer-io/tap-facebook
settings:
- description: |
    Your Facebook Ads Account ID

    #### How to get

    To get your Account ID:

    1. Visit the Facebook Ads Manager: <https://www.facebook.com/adsmanager/>
    2. Log in if you haven't already.
    3. Make sure the correct account is selected in the top left corner.

    ![Screenshot of account selector](/assets/images/tap-facebook/account-selector.png)

    4. You will see the Account ID displayed inside the selector. You can also find it in the URL, after `?act=` and ahead of any additional parameters starting with `&`:

    Examples:
    - URL: `https://www.facebook.com/adsmanager/manage/campaigns?act=593385444078559`

      Account ID: `593385444078559`
    - URL: `https://business.facebook.com/adsmanager/manage/campaigns?act=791728544625001&business_id=172253903856261`

      Account ID: `791728544625001`
  label: Account ID
  name: account_id
  placeholder: Ex. 123456789012345
- description: |
    User Token generated by Facebook OAuth handshake

    #### How to get

    ##### Create App

    First, you will need to create a Facebook App through the Developer Portal.

    1. Go to <https://developers.facebook.com/>.
    2. Log into Facebook if you haven't already. Make sure that your account is an Admin of the Ads Account you will be pulling data from.
    3. Convert your Facebook account to a Developer Account if you haven't done so already. This will not affect your personal Facebook profile, but will give you access to Facebook's developer tools.
    4. Click "My Apps" in the top right, and choose "Create App".
    5. In the modal that appears, enter a "Display Name" of your choosing. Since you will only use this app to generate an Access Token for your own use, the actual display name does not matter too much.
    6. Enter your email address under "Contact Email" if it is not yet populated automatically.
    7. Click "Create App ID".

    ![Screenshot of "Create A New App ID" modal](/assets/images/tap-facebook/create-new-app-id.png)

    8. Under "Add a Product", find "Marketing API", and click "Set Up".

    ##### Generate Access Token

    Now that your app has been created and the Marketing API product has been enabled, we can generate an access token.

    1. In the sidebar on the left, expand "Marketing API" if it isn't expanded already.
    2. Under "Marketing API", click "Tools".
    3. Select `ads_management`, `ads_read`, and `manage_pages` under "Select Token Permissions".
    4. Click "Get Token".
    5. Copy the token that appears in the field.

    ![Screenshot of "Get Access Token" section](/assets/images/tap-facebook/get-access-token.png)

    This is the Access Token you will provide to Meltano.

    ##### Connect the App

    After generating the access token, your app will need to be connected to the ad account within Facebook Business Manager. Navigate to Business Manager > Accounts > Apps > Connected Assets > Add Assets to add the access token.

    ##### Token Expiration

    Tokens generated using this method are only valid for 60 days by default.
    When the token expires, Meltano will no longer be able to automatically update your Facebook Ads data, and you will need to generate a new token and update the extractor configuration.

    To find out exactly when this token will expire, you can use the Access Token Debugger:

    1. Go to <https://developers.facebook.com/tools/debug/accesstoken/>.
    2. Paste the token into the field at the top.
    3. Click "Debug" on the right.
    4. Look for the value under "Expires".

    ![Screenshot of the Access Token Debugger](/assets/images/tap-facebook/access-token-debugger.png)

    To prevent any interruption of your data pipeline, we recommend that you generate and configure a new token before the currently configured one expires:

    1. Go to <https://developers.facebook.com/>
    2. Log into Facebook if you haven't already.
    3. Click "My Apps" in the top right, and select the app you created earlier.
    4. Follow the steps under ["Generate Access Token"](#generate-access-token) above.
  kind: oauth
  label: Access Token
  name: access_token
  oauth:
    provider: facebook
  placeholder: Ex. *****************
- description: Determines how much historical data will be extracted. Please be aware
    that the larger the time period and amount of data, the longer the initial extraction
    can be expected to take.
  kind: date_iso8601
  label: Start Date
  name: start_date
- description: Date up to when historical data will be extracted.
  kind: date_iso8601
  label: End Date
  name: end_date
- description: How many Days before the Start Date to fetch Ads Insights for
  kind: integer
  label: Insights Buffer Days
  name: insights_buffer_days
  value: 0
- description: Determines if it should include deleted objects or not.
  label: Include Deleted Objects
  name: include_deleted
settings_group_validation:
- - account_id
  - access_token
  - start_date
variant: singer-io
